<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROTIC - Formulir Pendaftaran</title>
    <link rel="stylesheet" href="form.css" />
  </head>
  <body>
    <section class="registration-section">
      <header class="header">
        <img src="img/header.png" alt="PROTIC Header" class="header-image" />
      </header>

      <div class="form-title-section">
        <h2 class="form-title">FORMULIR PENDAFTARAN</h2>
        <p class="form-subtitle">Pengurus Protic tahun 2025/2026</p>
        <div class="form-divider"></div>
      </div>

      <form id="registrationForm" class="registration-form">
        <!-- BIODATA -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">BIODATA</h3>
          </div>

          <div class="form-group">
            <label for="fullname" class="form-label">Nama Lengkap</label>
            <input type="text" id="fullname" name="fullname" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="npm" class="form-label">NPM</label>
            <input type="text" id="npm" name="npm" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="class" class="form-label">Kelas</label>
            <input type="text" id="class" name="class" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="semester" class="form-label">Semester</label>
            <input type="text" id="semester" name="semester" class="form-input" required />
          </div>
        </div>

        <!-- PILIHAN DIVISI -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">PILIHAN DIVISI</h3>
          </div>
          <p class="division-instruction">Pilih 2 Divisi yang sesuai dengan minat dan bakatmu!</p>

          <div class="division-grid">
            <div class="division-row">
              <button type="button" class="division-btn" data-division="WEB">WEB</button>
              <button type="button" class="division-btn" data-division="UI/UX">UI/UX</button>
              <button type="button" class="division-btn" data-division="MOBILE">MOBILE</button>
            </div>
            <div class="division-row">
              <button type="button" class="division-btn" data-division="DEVOPS">DEVOPS</button>
              <button type="button" class="division-btn" data-division="DATA">DATA</button>
              <button type="button" class="division-btn" data-division="HUMAS">HUMAS</button>
            </div>
            <div class="division-row">
              <button type="button" class="division-btn" data-division="SEKRETARIS">
                SEKRETARIS
              </button>
              <button type="button" class="division-btn" data-division="KOMINFO">KOMINFO</button>
              <button type="button" class="division-btn" data-division="BENDAHARA">
                BENDAHARA
              </button>
            </div>
          </div>
        </div>

        <!-- BERKAS -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">BERKAS</h3>
          </div>

          <div class="form-group">
            <label for="portfolio" class="form-label">Portofolio</label>
            <input
              type="url"
              id="portfolio"
              name="portfolio"
              class="form-input"
              placeholder="https://drive.google.com/your-portfolio-link"
            />
          </div>

          <div class="form-group">
            <label for="whatsapp" class="form-label">Nomor Whatsapp</label>
            <input
              type="tel"
              id="whatsapp"
              name="whatsapp"
              class="form-input"
              placeholder="08xxxxxxxxx"
              required
            />
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Email Aktif</label>
            <input type="email" id="email" name="email" class="form-input" required />
          </div>

          <div class="form-divider"></div>

          <button type="submit" class="submit-btn">Kirim</button>
        </div>
      </form>

      <footer class="footer">
        <p class="footer-copyright">Â© 2025 Protic | All Right Reserved</p>
      </footer>
    </section>

    <!-- SCRIPT -->
    <script>
      const scriptURL = 'https://script.google.com/macros/s/AKfycbxPXP-SG8DzCrO-xe-j-eVgPndQYLILmJJl53G2R8bnclthyJ7pR0N65qgjhry-3yPNOg/exec'
      const form = document.getElementById('registrationForm')

      let selectedDivisions = []

      document.querySelectorAll('.division-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          const division = btn.dataset.division
          if (selectedDivisions.includes(division)) {
            // batalin pilihan
            selectedDivisions = selectedDivisions.filter((d) => d !== division)
            btn.classList.remove('active')
          } else {
            if (selectedDivisions.length < 2) {
              selectedDivisions.push(division)
              btn.classList.add('active')
            } else {
              alert('Kamu hanya boleh memilih 2 divisi!')
            }
          }
        })
      })

      form.addEventListener('submit', (e) => {
        e.preventDefault()

        if (selectedDivisions.length !== 2) {
          alert('Harap pilih tepat 2 divisi!')
          return
        }

        const formData = {
          fullname: form.fullname.value,
          npm: form.npm.value,
          class: form.class.value,
          semester: form.semester.value,
          division1: selectedDivisions[0],
          division2: selectedDivisions[1],
          portfolio: form.portfolio.value,
          whatsapp: form.whatsapp.value,
          email: form.email.value,
        }

        fetch(scriptURL, {
          method: 'POST',
          body: JSON.stringify(formData),
        })
          .then((res) => res.json())
          .then((data) => {
            alert('Data berhasil dikirim!')
            form.reset()
            selectedDivisions = []
            document.querySelectorAll('.division-btn').forEach((b) => b.classList.remove('active'))
          })
          .catch((err) => console.error('Error!', err.message))
      })
    </script>
  </body>
</html>
