<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROTIC - Formulir Pendaftaran</title>
    <link rel="stylesheet" href="form.css" />
  </head>
  <body>
    <section class="registration-section">
      <header class="header">
        <img src="img/header.png" alt="PROTIC Header" class="header-image" />
      </header>

      <div class="form-title-section">
        <h2 class="form-title">FORMULIR PENDAFTARAN</h2>
        <p class="form-subtitle">Pengurus Protic tahun 2025/2026</p>
        <div class="form-divider"></div>
      </div>

      <form id="registrationForm" class="registration-form">
        <!-- BIODATA -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">BIODATA</h3>
          </div>

          <div class="form-group">
            <label for="fullname" class="form-label">Nama Lengkap</label>
            <input type="text" id="fullname" name="fullname" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="npm" class="form-label">NPM</label>
            <input type="number" id="npm" name="npm" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="class" class="form-label">Kelas</label>
            <input type="number" id="class" name="class" class="form-input" required />
          </div>

          <div class="form-group">
            <label for="semester" class="form-label">Semester</label>
            <input type="number" id="semester" name="semester" class="form-input" required />
          </div>
        </div>

        <!-- PILIHAN DIVISI -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">PILIHAN DIVISI</h3>
          </div>
          <p class="division-instruction">Pilih 2 Divisi yang sesuai dengan minat dan bakatmu!</p>

          <div class="division-grid">
            <div class="division-row">
              <button type="button" class="division-btn" data-division="WEB">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/5uFCUuNzBu.svg" alt="Web Icon" />
                WEB
              </button>
              <button type="button" class="division-btn" data-division="UI/UX">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/7jzX0UbUKY.svg" alt="UI/UX Icon" />
                UI/UX
              </button>
              <button type="button" class="division-btn" data-division="MOBILE">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/jCEeAU9sNZ.svg" alt="Mobile Icon" />
                MOBILE
              </button>
            </div>
            <div class="division-row">
              <button type="button" class="division-btn" data-division="DEVOPS">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/ujreGDnSPE.svg" alt="DevOps Icon" />
                DEVOPS
              </button>
              <button type="button" class="division-btn" data-division="DATA">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/94xnGqyXME.svg" alt="Data Icon" />
                DATA
              </button>
              <button type="button" class="division-btn" data-division="HUMAS">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/uTAsOaWFyH.svg" alt="Public Relations Icon" />
                HUMAS
              </button>
            </div>
            <div class="division-row">
              <button type="button" class="division-btn" data-division="SEKRETARIS">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/Jew6vrLeY4.svg" alt="Secretary Icon" />
                SEKRETARIS
              </button>
              <button type="button" class="division-btn" data-division="KOMINFO">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/0ZZbPizbCo.svg" alt="Communication Icon" />
                KOMINFO
              </button>
              <button type="button" class="division-btn" data-division="BENDAHARA">
                <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/VdxTPUnedF.svg" alt="Treasurer Icon" />
                BENDAHARA
              </button>
            </div>
          </div>
        </div>

        <!-- BERKAS -->
        <div class="form-section">
          <div class="section-header">
            <h3 class="section-title">BERKAS</h3>
          </div>

          <div class="form-group">
            <label for="portfolio" class="form-label">Portofolio</label>
            <input
              type="url"
              id="portfolio"
              name="portfolio"
              class="form-input"
              placeholder="https://drive.google.com/your-portfolio-link"
            />
          </div>

          <div class="form-group">
            <label for="whatsapp" class="form-label">Nomor Whatsapp</label>
            <input
              type="number"
              id="whatsapp"
              name="whatsapp"
              class="form-input"
              placeholder="08xxxxxxxxx"
              required
            />
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Email Aktif</label>
            <input type="email" id="email" name="email" class="form-input" required />
          </div>

          <div class="form-divider"></div>

          <button type="submit" id="submitBtn" class="submit-btn">
            <span id="btnText">Kirim</span>
            <span id="btnLoading" class="hidden">
              <svg
                class="spinner"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="path"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 
                    0 5.373 0 12h4zm2 5.291A7.962 
                    7.962 0 014 12H0c0 3.042 1.135 
                    5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
              Memproses...
            </span>
          </button>
        </div>
      </form>

      <footer class="footer">
        <div class="footer-content">
          <div class="footer-main">
            <div class="footer-logo">
              <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/pOR1YyEsWN.png" alt="PROTIC Logo" />
            </div>
            <div class="footer-text">
              <h3 class="footer-title">PROTIC</h3>
              <p class="footer-subtitle">Programming Technology Informatics Club</p>
            </div>
          </div>
          <div class="footer-divider"></div>
          <div class="footer-social">
            <a href="#" aria-label="Instagram" class="social-link">
              <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/Qo58fybJYO.svg" alt="Instagram" />
            </a>
            <a href="#" aria-label="Facebook" class="social-link">
              <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/yXf9Fjhke2.svg" alt="Facebook" />
            </a>
            <a href="#" aria-label="Twitter" class="social-link">
              <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-09-08/9QMxDqPuf8.svg" alt="Twitter" />
            </a>
          </div>
        </div>
        <p class="footer-copyright">Â© 2025 Protic | All Right Reserved</p>
      </footer>
    </section>

    <!-- SCRIPT -->
    <script>
      const scriptURL =
        'https://script.google.com/macros/s/AKfycbxPXP-SG8DzCrO-xe-j-eVgPndQYLILmJJl53G2R8bnclthyJ7pR0N65qgjhry-3yPNOg/exec'
      const form = document.getElementById('registrationForm')

      let selectedDivisions = []

      document.querySelectorAll('.division-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          const division = btn.dataset.division

          if (selectedDivisions.includes(division)) {
            // batalin pilihan
            selectedDivisions = selectedDivisions.filter((d) => d !== division)
            btn.classList.remove('active')
          } else {
            if (selectedDivisions.length < 2) {
              selectedDivisions.push(division)
              btn.classList.add('active')
            } else {
              alert('Kamu hanya boleh memilih 2 divisi!')
            }
          }
        })
      })

      form.addEventListener('submit', (e) => {
  e.preventDefault();

  if (selectedDivisions.length !== 2) {
    alert('Harap pilih tepat 2 divisi!');
    return;
  }

  const formData = {
    fullname: form.fullname.value,
    npm: form.npm.value,
    class: form.class.value,
    semester: form.semester.value,
    division1: selectedDivisions[0],
    division2: selectedDivisions[1],
    portfolio: form.portfolio.value,
    whatsapp: form.whatsapp.value,
    email: form.email.value,
  };

  setLoading(true); // aktifkan loading

  fetch(scriptURL, {
    method: 'POST',
    body: JSON.stringify(formData),
  })
    .then((res) => res.json())
    .then((data) => {
      window.location.href = 'thankyou.html';
    })
    .catch((err) => {
      console.error('Error!', err.message);
      alert('Terjadi kesalahan, coba lagi!');
    })
    .finally(() => {
      setLoading(false); // matikan loading kalau gagal
    });
});

      const submitBtn = document.getElementById("submitBtn");
      const btnText = document.getElementById("btnText");
      const btnLoading = document.getElementById("btnLoading");

      function setLoading(loading) {
        if (loading) {
          submitBtn.disabled = true;
          btnText.classList.add("hidden");
          btnLoading.classList.remove("hidden");
        } else {
          submitBtn.disabled = false;
          btnText.classList.remove("hidden");
          btnLoading.classList.add("hidden");
        }
      }

    </script>
  </body>
</html>
